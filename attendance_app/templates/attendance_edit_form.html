{% extends "base.html" %}
{% block title %}Edit Attendance{% endblock %}

{% block content %}
<div class="flex items-center justify-center min-h-[calc(100vh-100px)] px-4 py-6">
  
  <div class="w-full max-w-lg bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-700 overflow-hidden animate-in fade-in zoom-in duration-300">
    
    <div class="bg-gray-50 dark:bg-gray-700/50 px-6 py-5 border-b border-gray-100 dark:border-gray-700 flex items-center gap-3">
      <div class="p-2 bg-blue-100 dark:bg-blue-900/50 text-blue-600 rounded-lg">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
        </svg>
      </div>
      <div>
        <h1 class="text-xl font-bold text-gray-900 dark:text-gray-100">{{ title|default:"Edit Attendance" }}</h1>
        <p class="text-xs text-gray-500 dark:text-gray-400">Update check-in and check-out times manually.</p>
      </div>
    </div>

    <form method="post" class="p-6 space-y-6">
      {% csrf_token %}

      {% if form.non_field_errors %}
        <div class="p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 text-red-600 dark:text-red-400 text-sm flex items-start gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mt-0.5 shrink-0" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/></svg>
          <div>
            {% for error in form.non_field_errors %}<p>{{ error }}</p>{% endfor %}
          </div>
        </div>
      {% endif %}

      <div class="space-y-1.5">
        <label for="id_in_time" class="block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1">
          ðŸŸ¢ Check-In Time
        </label>
        <div class="relative">
          <input type="datetime-local" name="in_time" id="id_in_time"
                 value="{{ in_value|default:'' }}"
                 class="w-full bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none transition-all shadow-sm">
        </div>
        {% if form.in_time.errors %}
          <p class="text-red-500 text-xs mt-1 ml-1 font-medium">
            {% for e in form.in_time.errors %}{{ e }}{% endfor %}
          </p>
        {% endif %}
      </div>

      <div class="space-y-1.5">
        <label for="id_out_time" class="block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1">
          ðŸ”´ Check-Out Time
        </label>
        <div class="relative">
          <input type="datetime-local" name="out_time" id="id_out_time"
                 value="{{ out_value|default:'' }}"
                 class="w-full bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-xl px-4 py-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-all shadow-sm">
        </div>
        {% if form.out_time.errors %}
          <p class="text-red-500 text-xs mt-1 ml-1 font-medium">
            {% for e in form.out_time.errors %}{{ e }}{% endfor %}
          </p>
        {% endif %}
      </div>

      <div class="pt-4 flex flex-col sm:flex-row gap-3">
        <a href="{% url 'attendance_app:attendance_list' %}" 
           class="flex-1 text-center py-3 px-4 rounded-xl border border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 transition-all">
           Cancel
        </a>
        <button type="submit" 
                class="flex-1 py-3 px-4 rounded-xl bg-blue-600 hover:bg-blue-700 text-white font-bold shadow-lg shadow-blue-500/30 transition-all hover:-translate-y-0.5">
           Save Changes
        </button>
      </div>

    </form>
  </div>
</div>
{% endblock %}