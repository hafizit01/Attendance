{% extends 'base.html' %}
{% block content %}

<div class="mx-auto max-w-lg px-4 py-12">
  <div class="bg-white border rounded-2xl shadow p-8 text-center">

    {% if has_plan %}
      {% if is_active %}
        <!-- Active state -->
        <div class="mx-auto flex items-center justify-center w-16 h-16 rounded-full bg-emerald-100 text-emerald-700 mb-4">‚úÖ</div>
        <h2 class="text-2xl md:text-3xl font-bold text-emerald-700 mb-3">
          Your Subscription Is Active
        </h2>
        <p class="text-gray-700">
          Expires on
          <span class="font-medium">{{ last_end_date|date:"F j, Y" }}</span>.
          {% if days_left and days_left > 0 %}
            <span class="text-gray-500 text-sm">({{ days_left }} day{{ days_left|pluralize }} left)</span>
          {% endif %}
        </p>
        <div class="mt-6">
          <a href="{% url 'attendance_app:dashboard' %}"
             class="inline-flex items-center justify-center px-5 py-3 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-semibold shadow">
            Go to Dashboard
          </a>
        </div>

      {% else %}
        <!-- Expired state -->
        <div class="mx-auto flex items-center justify-center w-16 h-16 rounded-full bg-red-100 text-red-600 mb-4">‚è≥</div>
        <h2 class="text-2xl md:text-3xl font-bold text-red-600 mb-3">
          Your Subscription Has Expired
        </h2>
        <p class="text-gray-700 mb-2">
          Your last subscription ended on
          <span class="font-medium">{{ last_end_date|date:"F j, Y" }}</span>.
        </p>
        <p class="text-gray-500 text-sm mb-6">
          To continue using all features, please choose a new plan.
        </p>
        <div class="flex flex-col sm:flex-row justify-center gap-3">
          <a href="{% url 'subscription_app:view_plans' %}"
             class="inline-flex items-center justify-center px-5 py-3 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold shadow">
            üì¶ View Plans
          </a>
          <a href="{% url 'attendance_app:dashboard' %}"
             class="inline-flex items-center justify-center px-5 py-3 rounded-lg border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium">
            ‚Üê Back to Dashboard
          </a>
        </div>
      {% endif %}

    {% else %}
      <!-- No plan state -->
      <div class="mx-auto flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 text-gray-600 mb-4">üìÑ</div>
      <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-3">
        No Subscription Found
      </h2>
      <p class="text-gray-700 mb-2">You don‚Äôt have any active or previous subscription.</p>
      <p class="text-gray-500 text-sm mb-6">
        Pick a plan to get started.
      </p>
      <div>
        <a href="{% url 'subscription_app:view_plans' %}"
           class="inline-flex items-center justify-center px-5 py-3 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold shadow">
          Choose a Plan
        </a>
      </div>
    {% endif %}

    {# Debug (optional) ‚Äî ‡¶ö‡¶æ‡¶á‡¶≤‡ßá ‡¶∏‡¶æ‡¶Æ‡ßü‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶®‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶¶‡ßá‡¶ñ‡ßã #}
    {# <p class="mt-6 text-xs text-gray-400">Today: {{ today|date:"F j, Y" }}</p> #}
  </div>
</div>

{% endblock %}
