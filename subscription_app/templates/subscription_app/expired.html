{% extends 'base.html' %}
{% block content %}

<div class="mx-auto max-w-lg px-4 py-12">
  <div class="bg-white dark:bg-gray-900 border dark:border-gray-700 rounded-2xl shadow p-8 text-center">

    {% if has_plan %}
      {% if is_active %}
        <!-- Active state -->
        <div class="mx-auto flex items-center justify-center w-16 h-16 rounded-full bg-emerald-100 dark:bg-emerald-900 text-emerald-700 dark:text-emerald-300 mb-4">‚úÖ</div>
        <h2 class="text-2xl md:text-3xl font-bold text-emerald-700 dark:text-emerald-300 mb-3">
          Your Subscription Is Active
        </h2>
        <p class="text-gray-700 dark:text-gray-300">
          Expires on
          <span class="font-medium">{{ last_end_date|date:"F j, Y" }}</span>.
          {% if days_left and days_left > 0 %}
            <span class="text-gray-500 dark:text-gray-400 text-sm">({{ days_left }} day{{ days_left|pluralize }} left)</span>
          {% endif %}
        </p>
        <div class="mt-6">
          <a href="{% url 'attendance_app:dashboard' %}"
             class="inline-flex items-center justify-center px-5 py-3 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-semibold shadow transition">
            Go to Dashboard
          </a>
        </div>

      {% else %}
        <!-- Expired state -->
        <div class="mx-auto flex items-center justify-center w-16 h-16 rounded-full bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-300 mb-4">‚è≥</div>
        <h2 class="text-2xl md:text-3xl font-bold text-red-600 dark:text-red-400 mb-3">
          Your Subscription Has Expired
        </h2>
        <p class="text-gray-700 dark:text-gray-300 mb-2">
          Your last subscription ended on
          <span class="font-medium">{{ last_end_date|date:"F j, Y" }}</span>.
        </p>
        <p class="text-gray-500 dark:text-gray-400 text-sm mb-6">
          To continue using all features, please choose a new plan.
        </p>
        <div class="flex flex-col sm:flex-row justify-center gap-3">
          <a href="{% url 'subscription_app:view_plans' %}"
             class="inline-flex items-center justify-center px-5 py-3 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold shadow transition">
            üì¶ View Plans
          </a>
          <a href="{% url 'attendance_app:dashboard' %}"
             class="inline-flex items-center justify-center px-5 py-3 rounded-lg border border-gray-300 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 font-medium transition">
            ‚Üê Back to Dashboard
          </a>
        </div>
      {% endif %}

    {% else %}
      <!-- No plan state -->
      <div class="mx-auto flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 mb-4">üìÑ</div>
      <h2 class="text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-200 mb-3">
        No Subscription Found
      </h2>
      <p class="text-gray-700 dark:text-gray-300 mb-2">You don‚Äôt have any active or previous subscription.</p>
      <p class="text-gray-500 dark:text-gray-400 text-sm mb-6">
        Pick a plan to get started.
      </p>
      <div>
        <a href="{% url 'subscription_app:view_plans' %}"
           class="inline-flex items-center justify-center px-5 py-3 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold shadow transition">
          Choose a Plan
        </a>
      </div>
    {% endif %}

    {# Debug helper (optional) #}
    {# <p class="mt-6 text-xs text-gray-400 dark:text-gray-500">Today: {{ today|date:"F j, Y" }}</p> #}
  </div>
</div>

{% endblock %}
